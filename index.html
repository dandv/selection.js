<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Selection.js</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
        <meta name="author" content="lepture" />
        <link rel="alternate" type="application/rss+xml" href="http://feeds.lepture.com/lepture" title="Website Feed" />
        <link rel="stylesheet" href="http://python-assets.b0.upaiyun.com/project/typo.css" />
        <link rel="stylesheet" href="http://python-assets.b0.upaiyun.com/project/pygments.css" />
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-21475122-1']);
            _gaq.push(['_trackPageview']);
            _gaq.push(['_trackPageLoadTime']);
            _gaq.push(['_setCustomVar', 1, 'Project', 'selection.js', 2]);
            (function() {
             var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
             ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
             var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
             })();
        </script>
    </head>
    <body>
        <div class="container">
            <h1>Selection.js</h1>

<p><strong>UNDER DEVELOPMENT</strong></p>

<blockquote>
<p>This is a project by <a href="http://lepture.com">Hsiaoming Yang</a>. All projects are listed at <a href="http://project.lepture.com">project page</a>.</p>
</blockquote>

<p>Selection.js provides a clean API to access selection. It is powerful and easy
to use. It helps developers to deal with editor or something like that.</p>

<ul>
<li><a href="https://github.com/lepture/selection.js">GitHub</a></li>
<li><a href="http://project.lepture.com/selection.js/demo.html">DEMO</a></li>
<li><a href="http://project.lepture.com/selection.js/seajs-demo.html">seajs DEMO</a></li>
</ul>

<blockquote>
<p>Thanks to <a href="https://github.com/ichord">ichord</a>&#39;s work on <a href="https://github.com/ichord/At.js/blob/master/js/jquery.caret.js">jquery.caret.js</a>.</p>
</blockquote>

<h2>Selection in textarea or input</h2>

<p>The basic syntax:</p>

<ul>
<li><p>create a selection.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;#textarea&#39;</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">));</span>  <span class="c1">// jQuery or zepto is accepted too</span>
</pre></div></li>
<li><p>get current cursor position, return [start, end]</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">cursor</span><span class="p">();</span>
</pre></div></li>
<li><p>set cursor position (or select text)</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">cursor</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">cursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">cursor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</pre></div></li>
<li><p>get current selected text</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
</pre></div></li>
<li><p>replace current selected text</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;replaced text&#39;</span><span class="p">);</span>
</pre></div></li>
<li><p>insert text after current selection</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;append text&#39;</span><span class="p">);</span>
</pre></div></li>
<li><p>insert text before current selection</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="s1">&#39;prepend text&#39;</span><span class="p">);</span>
</pre></div></li>
<li><p>get current line text</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">line</span><span class="p">()</span>
</pre></div></li>
<li><p>get surround word</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">surround</span><span class="p">();</span>
<span class="nx">sel</span><span class="p">.</span><span class="nx">surround</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>   <span class="c1">// get surroud 3 characters.</span>
</pre></div></li>
<li><p>actions in a chain</p>
<div class="highlight"><pre><span class="nx">sel</span><span class="p">.</span><span class="nx">cursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;replaced text&#39;</span><span class="p">).</span><span class="nx">prepend</span><span class="p">(</span><span class="s1">&#39;prepend text&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;append text&#39;</span><span class="p">);</span>
</pre></div></li>
</ul>

<h2>Compatable with</h2>

<ul>
<li><a href="http://nodejs.org/">Nodejs</a></li>
<li><a href="http://seajs.org/">seajs</a></li>
<li><a href="http://jquery.com/">jQuery</a></li>
</ul>

<h3>seajs</h3>

<p>Load selection with seajs:</p>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;./selection&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selection</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>

<h3>jQuery</h3>

<p>Load selection with jQuery:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">selection</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">));</span>
</pre></div>

<h2>Selection on document</h2>

<p>Selection on document is much more complex. Should it support selection on document?</p>

<ul>
<li><p>selection in the same element</p>

<p>This is similar to selection in textarea, it is easy to implement this feature.</p></li>
<li><p>selection has an element in it</p>
<div class="highlight"><pre>this is a [selected <span class="nt">&lt;em&gt;</span>TEST<span class="nt">&lt;/em&gt;</span> text] for explain
</pre></div>

<p>assume that we have selected <code>selected &lt;em&gt;TEST&lt;/em&gt; text</code> ,
this is much more complex, but we can handle it.</p></li>
<li><p>selection between elements</p>
<div class="highlight"><pre><span class="nt">&lt;div&gt;</span>this is a [selection <span class="nt">&lt;/div&gt;&lt;p&gt;</span>between different] elements<span class="nt">&lt;/p&gt;</span>
</pre></div>

<p>assume that we have selected <code>selection &lt;div&gt;&lt;p&gt; between different</code>,
it is even more complex.</p></li>
<li><p>selection with a large area</p>

<p>What if we select a very large area, it has elements in it,
it is between two elements.</p></li>
</ul>

        </div>
        <hr class="end" />
        <div id="footer">
            <a href="https://github.com/lepture">GitHub</a>
            <a href="http://lepture.com">Website</a>
            <a href="https://twitter.com/lepture">Twitter</a>
        </div>
        <a id="github" href="https://github.com/lepture/selection.js" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0; z-index:999" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
    </body>
</html>

